import { ethers } from "hardhat";
import { ensureDeployer, selectDeployments } from "./utils";
import { contractCall } from "./contracts";
import { toBigInt } from "ethers";

const lists = [
  ["0x48c6074ffcb8fb67d75ccd06571b42542ed82555", "4746466666666660000000", "1695906000", "1695906001"],
  ["0x4f31649e0ff9870b2ba90db0f9c0e0f29cd25a78", "2506666666666660000000", "1695906000", "1695906001"],
  ["0xd2c5852fe531df44f0c6e2e7d8802b86aac42282", "116400000000000000000", "1695906000", "1695906001"],
  ["0x7d57b8b8a731cc1fc1e661842790e1864d5cf4e8", "400000000000000000000", "1695906000", "1695906001"],
  ["0x8c68c973c4a61027d7d8ecf6f5ed11965dd059db", "1266666666666660000000", "1695906000", "1695906001"],
  ["0x390f79a5710fb5e714ff208ad361dc732ca85f49", "258666666666666000000", "1695906000", "1695906001"],
  ["0xffa4c4a18b2f63f9d94b4ecc87ad0dc19723402c", "330000000000000000000", "1695906000", "1695906001"],
  ["0xc82633a2a7fcebc711862a77ae77559d39286b00", "280000000000000000000", "1695906000", "1695906001"],
  ["0x0882bf94cca0b1d991f372bda1d5fe658369a530", "213333333333333000000", "1695906000", "1695906001"],
  ["0x1488a4c4c06eebbde696a633c703dcc1896ef996", "1653333333333330000000", "1695906000", "1695906001"],
  ["0x641b3afd1c38c465256f0f5b54e3354d6329ac44", "2893333333333330000000", "1695906000", "1695906001"],
  ["0xd28a4c5b3685e5948d8a57f124669eafb69f05bb", "666666666666666000000", "1695906000", "1695906001"],
  ["0x4caae64a4318b619f5c3cc649b76e5cb9beebbd3", "2000000000000000000000", "1695906000", "1695906001"],
  ["0x7426b23ba5fdc40680f9e40fc4a2e80377785beb", "219999999999999000000", "1695906000", "1695906001"],
  ["0x23bb136e5e5bbfaad7663544b8b7814f7ec9029b", "133333333333333000000", "1695906000", "1695906001"],
  ["0x941b5790108a359241caff127bbf0b16e2bef085", "101333333333333000000", "1695906000", "1695906001"],
  ["0x9206bc8daac7d4449ef12f9006b1585aba814dec", "16000000000000000000", "1695906000", "1695906001"],
  ["0x1c73e4eca25327692ae11c8364f2be5827469d39", "50133333333333300000", "1695906000", "1695906001"],
  ["0x58c0c064a89138bf3216c20f4e4827ec0fe78e87", "233333333333333000000", "1695906000", "1695906001"],
  ["0xb212296893756c6226272f38d7d436cc693c163e", "266666666666666000000", "1695906000", "1695906001"],
  ["0xe0714e288d4183d5f5f810307e6e2138cb7e9313", "66666666666666600000", "1695906000", "1695906001"],
  ["0x766c64d809056fbb492fdb410a6b4857c015619a", "226666666666666000000", "1695906000", "1695906001"],
  ["0xfd6a259e2bd6eefd20e5e2ff3c4bf881159d3fcc", "800000000000000000000", "1695906000", "1695906001"],
  ["0xb1a29cc83536dc4c4149e487b3454b77ce1be6ee", "53333333333333300000", "1695906000", "1695906001"],
  ["0xee98bdcdf20997ddb097ed4582efed9de87739fe", "100000000000000000000", "1695906000", "1695906001"],
  ["0x9cfe6c4e42243079d87ca26b6d86c15e2ec4a807", "666666666666666000000", "1695906000", "1695906001"],
  ["0x02755e1830a75749346dcd674e28a4e3d6f5f935", "1293333333333330000000", "1695906000", "1695906001"],
  ["0xbd14a32aa56d03cc5014730262f25203627ef444", "789333333333332000000", "1695906000", "1695906001"],
  ["0xc8810fde8e6f0911d8b180e03c367b2a2838bad6", "1600000000000000000000", "1695906000", "1695906001"],
  ["0x21fac85314ec208b2f57ca52a07f7f8a336d2159", "25333333333333300000", "1695906000", "1695906001"],
  ["0x95c2320fe56c248f15be7be3437d499ee31ffd57", "133333333333333000000", "1695906000", "1695906001"],
  ["0x7f5fe0cf45ad50b4e80fe66a87f692b7c006bc3e", "26666666666666600000", "1695906000", "1695906001"],
  ["0x3ff8788f9172d77a9688939bc00442c7be9042bf", "266666666666666000000", "1695906000", "1695906001"],
  ["0x1adfcc02a1dfb43552dbcb5d977b51a5a3fb77f4", "266666666666666000000", "1695906000", "1695906001"],
  ["0x5a626a01ab0a2b955053b30d6b33e32479b63c6b", "200000000000000000000", "1695906000", "1695906001"],
  ["0xbcb5dc467d09d518a0eba0bd968a3ecfb37768c8", "866666666666666000000", "1695906000", "1695906001"],
  ["0x22fba0bd117d7c29a41c9f75bba432f415a79e5b", "60000000000000000000", "1695906000", "1695906001"],
  ["0x12dbbcd4efc77633a83cb1d67251e3daa9268fe5", "1333333333333330000000", "1695906000", "1695906001"],
  ["0xfed6be359e08c9513c7acf5e6073a76fecacffdf", "853333333333333000000", "1695906000", "1695906001"],
  ["0xc2fb45222575cee0426865194fc849d6736a61a0", "266666666666666000000", "1695906000", "1695906001"],
  ["0xcb004317ef3ed46614ec6f9f2620322f6c60b002", "133333333333333000000", "1695906000", "1695906001"],
  ["0x5f4c07e31f73a411093823780a95645604a51ec4", "152000000000000000000", "1695906000", "1695906001"],
  ["0xb4a2e8824a2648874d92dbe34572b00acf96af24", "66666666666666600000", "1695906000", "1695906001"],
  ["0x2ed56486d94570b55c4e514e55a9d6f2b630f2aa", "133333333333333000000", "1695906000", "1695906001"],
  ["0x4ae6c835015d06169fa831529ac39d890b9a8e82", "2000000000000000000000", "1695906000", "1695906001"],
  ["0xbf9fb41d379324fd7da97f51db6f353fc5e2bcf0", "39999999999999900000", "1695906000", "1695906001"],
  ["0x8da02d597a2616e9ec0c82b2b8366b00d69da29a", "46666666666666600000", "1695906000", "1695906001"],
  ["0x0ba48b0aea8f86423254b787461ca35c2496f2d0", "2933333333333330000000", "1695906000", "1695906001"],
  ["0xb5d41ed54ca35a5074c8f8ffca9c627327d7c45d", "933333333333332000000", "1695906000", "1695906001"],
  ["0x0f3a9f7ee2341901cf06f1f518fd454c161de415", "1333333333333330000000", "1695906000", "1695906001"],
  ["0x5d0e6a02ffda33516b170015b400eab91f130c9d", "53333333333333300000", "1695906000", "1695906001"],
  ["0x58bd13974d76fcec0f7d7c31f725ced41c9c4287", "706666666666666000000", "1695906000", "1695906001"],
  ["0xac65fa93f2b4477b2190bd184d5a164f0b10b2d9", "120000000000000000000", "1695906000", "1695906001"],
  ["0x85445686924ba74ca9d014c8340bf33cb761ea0b", "533333333333333000000", "1695906000", "1695906001"],
  ["0x329bcb8e3b4447af63c5d67a91ce5d2591cb5679", "1333333333333330000000", "1695906000", "1695906001"],
  ["0x42108763fbf1d7327632bd316715a8124a2f0720", "10666666666666600000", "1695906000", "1695906001"],
  ["0xa046026cd063560d74253a11d5858ebd4a94996d", "200000000000000000000", "1695906000", "1695906001"],
  ["0x4a401ee7fef089cd20d183fe2510d7bd38294728", "266666666666666000000", "1695906000", "1695906001"],
  ["0x2210ef8fe0b56a7ea0d3ae77ac6fd1c1dec8a9ba", "181000000000000000000", "1695906000", "1695906001"],
  ["0xd84cacf927db765ddddca706351c60c20f2a22b5", "50666666666666600000", "1695906000", "1695906001"],
  ["0x1f50e3fef6fbf8f5d0168cbd30c1b502a9a58bde", "453333333333333000000", "1695906000", "1695906001"],
  ["0x83d18cbe1de144962e2956ebdffe0ead300c4860", "72000000000000000000", "1695906000", "1695906001"],
  ["0xba758daf5898dd34e175364ab20f2eb6f3bf0252", "2226100000000000000000", "1695906000", "1695906001"],
  ["0x8cb71cec028ccb62a88a89364884d1df5c0c5273", "42880000000000000000", "1695906000", "1695906001"],
  ["0xfdbbfb0fe2986672af97eca0e797d76a0bbf35c9", "900000000000000000000", "1695906000", "1695906001"],
  ["0xbd14a32aa56d03cc5014730262f25203627ef444", "539140000000000000000", "1695906000", "1695906001"],
  ["0x5f4c07e31f73a411093823780a95645604a51ec4", "200000000000000000000", "1695906000", "1695906001"],
  ["0x9eff6bf2a7b4572533233c0c10f8199166b73f39", "200000000000000000000", "1695906000", "1695906001"],
  ["0xd28a4c5b3685e5948d8a57f124669eafb69f05bb", "2000000000000000000000", "1695906000", "1695906001"],
  ["0x858e313b9f60bb138305a7904571d172201b1ef0", "5600000000000000000000", "1695906000", "1695906001"],
  ["0xc82633a2a7fcebc711862a77ae77559d39286b00", "10000000000000000000", "1695906000", "1695906001"],
  ["0x84afb4b60844f8759154d6ff7b0580daa2d4e37d", "2000000000000000000000", "1695906000", "1695906001"],
  ["0x44ef4e21490d454d2d9e2b5fc32b74c384d51744", "400000000000000000000", "1695906000", "1695906001"],
  ["0xc7d2e1e5f474a975fbff6cf62d7412cce048e32c", "200000000000000000000", "1695906000", "1695906001"],
  ["0xbad81e37c8d4657672e4ae61ba5a49084dc5949e", "60000000000000000000", "1695906000", "1695906001"],
  ["0xcc7cc2e94273e694998ba0b3c80306cf031aedb7", "600000000000000000000", "1695906000", "1695906001"],
  ["0x682c72e317cf93a36ace26d52f9eb9c41712e56c", "200000000000000000000", "1695906000", "1695906001"],
  ["0x3dca07e16b2becd3eb76a9f9ce240b525451f887", "10000000000000000000000", "1695906000", "1695906001"],
  ["0x48d65eeaa659c739472f6da6f5e90a6a1bf301ca", "500000000000000000000", "1695906000", "1695906001"],
  ["0xc397a2c2963e3181883b7135a7ef1ba85e8ceb82", "251000000000000000000", "1695906000", "1695906001"],
  ["0x5d4d37431cc5756bbca54b07087d884b04fd8111", "400000000000000000000", "1695906000", "1695906001"],
  ["0x1c46ee20e28f2c32051b815259777be3219f8d33", "200000000000000000000", "1695906000", "1695906001"],
  ["0xe1159898d2a623b16f197a600a6d5f87b7eac658", "600000000000000000000", "1695906000", "1695906001"],
  ["0x81db2dfd33b24419f0f715e331f678411eb1ec30", "200000000000000000000", "1695906000", "1695906001"],
  ["0xa9c58107a1dd555776432366abedfa81a8ebf057", "1000000000000000000000", "1695906000", "1695906001"],
  ["0x018c8a81cb02ca1a327baefd400f75f57ea57ba2", "600000000000000000000", "1695906000", "1695906001"],
  ["0x515c07dd7cd01496d4000e4998b4fd5acd2c09e1", "134400000000000000000", "1695906000", "1695906001"],
  ["0x6301a7aa870e96d852b57fb5e4441d8831bda12b", "5000000000000000000000", "1695906000", "1695906001"],
  ["0x87d5633934e9ea2fae6088682c68991f572b9d75", "5600000000000000000000", "1695906000", "1695906001"],
  ["0xffa4c4a18b2f63f9d94b4ecc87ad0dc19723402c", "660000000000000000000", "1695906000", "1695906001"],
  ["0x00012f478416eaa67eb355c2e1b60c48fd9592bd", "400000000000000000000", "1695906000", "1695906001"],
  ["0x399e0ac15c751468614e148bd7a6ed6479b88850", "54000000000000000000", "1695906000", "1695906001"],
  ["0x12caae8fc4ee86b8f774707ebc5fb7d760189418", "400000000000000000000", "1695906000", "1695906001"],
  ["0xbcabdc5425ef27a83e185857e908b16b79b1f514", "1300000000000000000000", "1695906000", "1695906001"],
  ["0x7bfee91193d9df2ac0bfe90191d40f23c773c060", "2000000000000000000000", "1695906000", "1695906001"],
  ["0xc8810fde8e6f0911d8b180e03c367b2a2838bad6", "600000000000000000000", "1695906000", "1695906001"],
  ["0x58b80ff10946cfda425c81f8619c6c1615a517b5", "1000000000000000000000", "1695906000", "1695906001"],
  ["0xf1aadc1845456d934c7dc789bbcde51bb1aa3317", "200000000000000000000", "1695906000", "1695906001"],
  ["0x2210ef8fe0b56a7ea0d3ae77ac6fd1c1dec8a9ba", "370000000000000000000", "1695906000", "1695906001"],
  ["0x22fba0bd117d7c29a41c9f75bba432f415a79e5b", "100000000000000000000", "1695906000", "1695906001"],
  ["0xbb9fc1e9109382253b110bcf480c91e93d59e996", "400000000000000000000", "1695906000", "1695906001"],
  ["0x1c73e4eca25327692ae11c8364f2be5827469d39", "22000000000000000000", "1695906000", "1695906001"],
  ["0x92fdeed8b7b80012ae423787c2ddca31f85d740b", "800000000000000000000", "1695906000", "1695906001"],
  ["0xee622122bc71ee46285c3bbd36e0f134a7271c85", "1600000000000000000000", "1695906000", "1695906001"],
  ["0x4a401ee7fef089cd20d183fe2510d7bd38294728", "400000000000000000000", "1695906000", "1695906001"],
  ["0xf3e0974a5fecfe4173e454993406243b2188eeed", "2000000000000000000000", "1695906000", "1695906001"],
  ["0x2b785c3c08651850198372e9a32e9cf6f8cd03d2", "16000000000000000000", "1695906000", "1695906001"],
  ["0xc943e6d9e378376614d7f3dbf4f57278fcb8a23e", "200000000000000000000", "1695906000", "1695906001"],
  ["0xb957dccaa1ccfb1eb78b495b499801d591d8a403", "100000000000000000000", "1695906000", "1695906001"],
  ["0xf51945c5e905ed80bcda4f59bff4620ff0ed3a34", "5960000000000000000000", "1695906000", "1695906001"],
  ["0x8f3b92a7a8be91a087b7549d5134c44708e6ed1d", "53760000000000000000", "1695906000", "1695906001"],
  ["0x1cf653e81fa3d567b05bcc4fab25560336805714", "200000000000000000000", "1695906000", "1695906001"],
  ["0xb2dd7f7a0c94364067ade38ab28ad18d124bb329", "1500720000000000000000", "1695906000", "1695906001"],
  ["0x1389388d01708118b497f59521f6943Be2541bb7", "6000000000000000000000", "1695906000", "1695906001"],
  ["0x7a16fF8270133F063aAb6C9977183D9e72835428", "3000000000000000000000", "1695906000", "1727442000"],
  ["0xb3DF5271b92e9fD2fed137253BB4611285923f16", "3000000000000000000000", "1695906000", "1727442000"],
  ["0xAAc0aa431c237C2C0B5f041c8e59B3f1a43aC78F", "3000000000000000000000", "1695906000", "1727442000"],
  ["0x174EcfB54875CBC36FA820B6B8Ad11d22223665B", "2000000000000000000000", "1695906000", "1727442000"],
  ["0xB1748C79709f4Ba2Dd82834B8c82D4a505003f27", "3000000000000000000000", "1695906000", "1727442000"],
  ["0xc40549aa1D05C30af23a1C4a5af6bA11FCAFe23F", "600000000000000000000000", "1695906000", "1758978000"],
  ["0x26B2ec4E02ebe2F54583af25b647b1D619e67BbF", "60000000000000000000000", "1695906000", "1758978000"],
  ["0x26B2ec4E02ebe2F54583af25b647b1D619e67BbF", "200000000000000000000000", "1695906000", "1758978000"],
];

async function main() {
  const deployer = await ensureDeployer("mainnet");
  const depolyment = selectDeployments("mainnet", "Fx.Governance");
  const helper = await ethers.getContractAt("MultipleVestHelper", depolyment.get("MultipleVestHelper"), deployer);
  const fxn = await ethers.getContractAt("GovernanceToken", depolyment.get("FXN"), deployer);

  const recipients = [];
  const amounts = [];
  const startTimes = [];
  const endTimes = [];
  let sum = 0n;
  for (const [recipient, amountStr, startTs, endTs] of lists) {
    const amount = toBigInt(amountStr);
    recipients.push(recipient);
    amounts.push(amount);
    startTimes.push(startTs);
    endTimes.push(endTs);
    sum += amount;
  }
  console.log("total FXN:", ethers.formatEther(sum));

  if ((await fxn.allowance(deployer.address, await helper.getAddress())) < sum) {
    await contractCall(fxn, `FXN approve ${ethers.formatEther(sum)} to MultipleVestHelper`, "approve", [
      await helper.getAddress(),
      sum,
    ]);
  }

  const estimateGas = await helper.call.estimateGas(
    depolyment.get("Vesting"),
    recipients,
    amounts,
    startTimes,
    endTimes
  );
  console.log("estimate gas:", estimateGas.toString());
  const tx = await helper.call(depolyment.get("Vesting"), recipients, amounts, startTimes, endTimes, {
    gasLimit: (estimateGas * 12n) / 10n,
  });
  console.log("run multiple vests, hash:", tx.hash);
  const receipt = await tx.wait();
  console.log("✅ Done, gas used", receipt!.gasUsed.toString());
}

// We recommend this pattern to be able to use async/await everywhere
// and properly handle errors.
main().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
